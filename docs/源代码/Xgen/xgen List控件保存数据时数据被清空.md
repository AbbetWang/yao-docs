# List 删除项目后，列表被清空

0.10.3/yao-wms/forms/plan.form.json 这个 form 里使用了 List 控件作为子表保存数据，
当用户删除已有的项目时，会清空整个列表。

为什么会出现这个问题？

因为这个控件的处理新增数据与修改数据时的数据结构是不一样的。

当你新增数据，没有删除数据时，这个控件对应的数据结构是数组，数组里保存了控件里的行数据。

而当我们有了删除操作后，这个控件对应的数据结构发生了变化。它会变成一个对象。对象里包含一个 data 对象和一个 delete 对象。

- 在 data 对象里包含未被删除的对象列表，
- 在 delete 包含删除对象列表。

没有删除操作时

```json
[
  {
    "item1": 1
  },
  {
    "item2": 1
  }
]
```

有删除操作后

```json
{
  "data": [{ "item1": 1 }],
  "delete": [{ "item2": 1 }]
}
```

在赋值时，加个判断即可。

尝试修复如下：
https://github.com/wwsheng009/xgen/commit/c2534e88404166749c66b965aed2bbd99f785333
