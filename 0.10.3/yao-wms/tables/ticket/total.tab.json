{
  "name": "台账",
  "action": {
    "bind": {
      "model": "ticket",
      "option": {
        "withs": {
          "user": {
            "query": {
              "select": ["id", "name", "photo", "supplier_id"],
              "withs": { "supplier": {} }
            }
          },
          "plan": { "query": { "select": ["id", "name"] } },
          "warehouse": { "query": { "select": ["id", "name", "dept"] } },
          "sku": {
            "query": {
              "select": ["id", "specs"],
              "withs": {
                "material": { "query": { "select": ["name", "id"] } }
              }
            }
          }
        }
      }
    },
    "search": {
      "default": [
        {
          "withs": {
            "user": {
              "query": {
                "select": ["id", "name", "photo", "supplier_id"],
                "withs": { "supplier": {} }
              }
            },
            "plan": { "query": { "select": ["id", "name"] } },
            "warehouse": { "query": { "select": ["id", "name", "dept"] } }
          },
          "orders": [{ "column": "uptime", "option": "desc" }]
        },
        null,
        10
      ]
    },
    "before:search": "scripts.ticket.BeforeSearch",
    "after:find": "scripts.ticket.AfterFind",
    "before:save": "scripts.ticket.BeforeSave",
    "after:save": "scripts.ticket.AfterSave"
  }
}
